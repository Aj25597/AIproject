import openai
import pandas as pd

openai.api_key = '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'

emails_df = pd.read_csv('emails.csv')
original_emails = emails_df['Content']
tasks = []

for email in original_emails:
    messages = [
        {"role": "system", "content": "You are a helpful assistant. Convert the following email into a task for a to-do list and suggest a priority level (high, medium, low)."},
        {"role": "user", "content": email}
    ]

    response = openai.ChatCompletion.create(
        model='gpt-3.5-turbo',
        messages=messages,
        max_tokens=100
    )

    task = response['choices'][0]['message']['content']
    tasks.append(task)

# Now, you have your tasks
for i, task in enumerate(tasks):
    print(f"Task {i+1}: {task}")
